<!doctype html>
<html class="no-js" lang="">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Chương trình khuyến mãi</title>
    <meta name="description" content="Ela Admin - HTML5 Admin Template">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/normalize.css@8.0.0/normalize.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="assets/css/cs-skin-elastic.css">
    <link rel="stylesheet" href="assets/css/style.css">

    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />


    <link rel="stylesheet" href="assets/css/custom.css">

    <script src="https://cdn.jsdelivr.net/npm/jquery@2.2.4/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.4/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js"></script>
    <script src="assets/js/main.js"></script>

    <!-- date range picker -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/jquery/latest/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />
</head>

<body>
    <aside id="left-panel" class="left-panel">
        <nav class="navbar navbar-expand-sm navbar-default">
            <div id="main-menu" class="main-menu collapse navbar-collapse">
                <ul class="nav navbar-nav">
                    <li class="active">
                        <a style="color:#ff5722" href="index.html"><i style="color:#ff5722" class="menu-icon fa fa-laptop"></i>Dashboard
                        </a>
                    </li>

                    <li>
                        <a href="#" aria-haspopup="true" aria-expanded="false">
                            <i class="menu-icon fa fa-cogs"></i>Quản lý sản phẩm</a>
                    </li>

                    <li class="menu-item-has-children dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <i class="menu-icon fa fa-cogs"></i>Thiết lập shop</a>
                        <ul class="sub-menu children dropdown-menu">
                            <li><i class="fa fa-puzzle-piece"></i><a href="profile.html">Hồ sơ</a></li>
                            <li><i class="fa fa-id-badge"></i><a href="bank.html">Ngân hàng</a></li>
                            <li><i class="fa fa-bars"></i><a href="notification.html">Thông báo</a></li>
                            <li><i class="fa fa-id-card-o"></i><a href="changepass.html">Đổi mật khẩu</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="#" aria-haspopup="true" aria-expanded="false">
                            <i class="menu-icon fa fa-cogs"></i>Quản lý đơn bán</a>
                    </li>
                    <li>
                        <a href="#" aria-haspopup="true" aria-expanded="false">
                            <i class="menu-icon fa fa-cogs"></i>Tạo khuyến mãi</a>
                    </li>
                    <li>
                        <a href="#" aria-haspopup="true" aria-expanded="false">
                            <i class="menu-icon fa fa-cogs"></i>Gói dịch vụ</a>
                    </li>
                    <li>
                        <a href="#" aria-haspopup="true" aria-expanded="false">
                            <i class="menu-icon fa fa-cogs"></i>Doanh thu</a>
                    </li>


                </ul>
            </div>
        </nav>
    </aside>

    <div id="right-panel" class="right-panel">
        <header id="header" class="header">
            <div class="top-left">
                <div class="header-menu">
                    <div class="header-left">
                        <div class="left-topbar">
                            <img class="logo" height="60" width="120" alt="WOOW" src="images/logo.png">
                            <label style="color:#ffffff;font-size:120%;font-family:verdana;">- Shop của tôi</label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="top-right">
                <div class="header-menu">
                    <div class="header-left">
                        <div class="dropdown for-notification">
                            <button class="btn btn-secondary dropdown-toggle" type="button" id="notification"
                                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <i style="color:#ffffff" class="fa fa-bell"></i>
                                <span class="count bg-danger">3</span>
                            </button>
                            <div class="dropdown-menu" aria-labelledby="notification">
                                <p class="red">You have 3 Notification</p>
                                <a class="dropdown-item media" href="#">
                                    <i class="fa fa-check"></i>
                                    <p>Server #1 overloaded.</p>
                                </a>
                                <a class="dropdown-item media" href="#">
                                    <i class="fa fa-info"></i>
                                    <p>Server #2 overloaded.</p>
                                </a>
                                <a class="dropdown-item media" href="#">
                                    <i class="fa fa-warning"></i>
                                    <p>Server #3 overloaded.</p>
                                </a>
                            </div>
                        </div>

                        <div class="dropdown for-message">
                            <button class="btn btn-secondary dropdown-toggle" type="button" id="message" data-toggle="dropdown"
                                aria-haspopup="true" aria-expanded="false">
                                <i style="color:#ffffff" class="fa fa-envelope"></i>
                                <span class="count bg-primary">4</span>
                            </button>
                            <div class="dropdown-menu" aria-labelledby="message">
                                <p class="red">You have 4 Mails</p>
                                <a class="dropdown-item media" href="#">
                                    <span class="photo media-left"><img alt="avatar" src="images/avatar/1.jpg"></span>
                                    <div class="message media-body">
                                        <span class="name float-left">Jonathan Smith</span>
                                        <span class="time float-right">Just now</span>
                                        <p>Hello, this is an example msg</p>
                                    </div>
                                </a>
                                <a class="dropdown-item media" href="#">
                                    <span class="photo media-left"><img alt="avatar" src="images/avatar/2.jpg"></span>
                                    <div class="message media-body">
                                        <span class="name float-left">Jack Sanders</span>
                                        <span class="time float-right">5 minutes ago</span>
                                        <p>Lorem ipsum dolor sit amet, consectetur</p>
                                    </div>
                                </a>
                                <a class="dropdown-item media" href="#">
                                    <span class="photo media-left"><img alt="avatar" src="images/avatar/3.jpg"></span>
                                    <div class="message media-body">
                                        <span class="name float-left">Cheryl Wheeler</span>
                                        <span class="time float-right">10 minutes ago</span>
                                        <p>Hello, this is an example msg</p>
                                    </div>
                                </a>
                                <a class="dropdown-item media" href="#">
                                    <span class="photo media-left"><img alt="avatar" src="images/avatar/4.jpg"></span>
                                    <div class="message media-body">
                                        <span class="name float-left">Rachel Santos</span>
                                        <span class="time float-right">15 minutes ago</span>
                                        <p>Lorem ipsum dolor sit amet, consectetur</p>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>

                    <div class="user-area dropdown float-right">
                        <a href="#" class="dropdown-toggle active" data-toggle="dropdown" aria-haspopup="true"
                            aria-expanded="false">
                            <img class="user-avatar rounded-circle" src="images/admin.jpg" alt="User Avatar">
                        </a>

                        <div class="user-menu dropdown-menu">
                            <a class="nav-link" href="#"><i class="fa fa- user"></i>My Profile</a>

                            <a class="nav-link" href="#"><i class="fa fa- user"></i>Notifications <span class="count">13</span></a>

                            <a class="nav-link" href="#"><i class="fa fa -cog"></i>Settings</a>

                            <a class="nav-link" href="#"><i class="fa fa-power -off"></i>Logout</a>
                        </div>
                    </div>

                </div>
            </div>
        </header>

        <div class="content">
            <div class="animated fadeIn row">
                <div class="col-lg-12">
                    <div class="card">

                        <div class="card-header card-promotion">
                            <h2 class="text-uppercase promotion-title"> Khuyến mãi 20/11 </h2>
                            <span class="badge badge-danger bage-cus center">
                                <i class="fa fa-tags"></i> Sắp diễn ra
                            </span>
                            <div class="promotion-time">
                                <span>
                                    <i class="fa fa-calendar"></i> Thời gian diễn ra:
                                </span>
                                <span>
                                    <strong>11/12 07:00 AM - 11/13 03:00 PM</strong>
                                </span>
                                <span>
                                    <a data-toggle="collapse" href="#editPromotionTime" role="button" aria-expanded="false"
                                        aria-controls="editPromotionTime">
                                        <i class="fa fa-pencil"></i> Sửa khuyến mãi
                                    </a>
                                </span>

                                <div class="collapse" id="editPromotionTime">
                                    <div class="card card-body">
                                        <div class="col-md-5">
                                            <div class="edit-promotion">
                                                Tên chương trình: <input class="form-control" type="text">
                                            </div>
                                            <div class="edit-promotion">
                                                Thời gian diễn ra: <input class="form-control" type="text" name="datetimes" />
                                            </div>
                                            <div class="edit-promotion" style="font-size: small; color: grey;">
                                                <i>
                                                    <i class="fa fa-info-circle"></i>
                                                    Chỉ có thể rút ngắn thời gian khuyến mãi
                                                </i>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>

                        <div class="card-body">
                            <div class="row">
                                <div class="col-lg-12">
                                    <button type="button" style="margin-bottom: 15px" class="btn btn-danger btn-primary-custom"
                                        data-toggle="modal" data-target=".bd-example-modal-lg">
                                        Thêm sản phẩm
                                    </button>

                                    <button class="btn btn-danger btn-primary-custom pull-right" onClick="onFinish()">
                                        Hoàn tất
                                    </button>


                                    <div class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog"
                                        aria-labelledby="myLargeModalLabel" aria-hidden="true" id="addItemModal">
                                        <div class="modal-dialog modal-lg">
                                            <div class="modal-content">
                                                <div class="container" style="padding: 15px">
                                                    <div class="modal-head">
                                                        <h4 style="margin:15px 0;">Chọn sản phẩm muốn thêm</h4>

                                                        <form class="form-inline my-2 my-lg-0">
                                                            <input class="form-control mr-sm-2" type="search"
                                                                placeholder="Search" aria-label="Search">
                                                            <button class="btn btn-danger btn-primary-custom pull-right my-2 my-sm-0"
                                                                type="submit">
                                                                <i class="fa fa-search"></i>
                                                            </button>
                                                        </form>
                                                    </div>

                                                    <div class="product-image-container" id="product-image-container">

                                                    </div>
                                                    <button data-dismiss="modal" class="btn btn-danger btn-primary-custom pull-right"
                                                        onClick="onConfirm()">
                                                        Xác nhận
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div>
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th style="text-align: center" scope="col">#</th>
                                                    <th style="text-align: center" scope="col">Hình ảnh</th>
                                                    <th style="text-align: center" scope="col">Tên sản phẩm</th>
                                                    <th style="text-align: center" scope="col">Giá gốc</th>
                                                    <th style="text-align: center" scope="col">% Giảm</th>
                                                    <th style="text-align: center" scope="col">Giá sau giảm</th>
                                                    <th style="text-align: center" scope="col"> </th>
                                                </tr>
                                            <tbody id="tab">

                                            </tbody>
                                            </thead>
                                        </table>
                                    </div>

                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>


    <script>
        var selectedItem = [];
        var items = [{
                id: 1,
                name: "Oppo A714",
                imageSrc: "https://cdn.tgdd.vn/Products/Images/42/113259/oppo-a714-1.jpg",
                price: 1000000
            },
            {
                id: 2,
                name: "Oppo R7S",
                imageSrc: "https://www.naijatechguide.com/wp-content/uploads/2015/10/oppo-r7s.png",
                price: 1000000
            },
            {
                id: 3,
                name: "Oppo A715",
                imageSrc: "http://cdn.phuongtung.info/pt/products/oppo/A71/oppo-a715-1.jpg",
                price: 1000000
            },
            {
                id: 4,
                name: "Oppo A714",
                imageSrc: "https://cdn.tgdd.vn/Products/Images/42/113259/oppo-a714-1.jpg",
                price: 1000000
            },
            {
                id: 5,
                name: "Oppo R7S",
                imageSrc: "https://www.naijatechguide.com/wp-content/uploads/2015/10/oppo-r7s.png",
                price: 1000000
            },
            {
                id: 6,
                name: "Oppo A715",
                imageSrc: "http://cdn.phuongtung.info/pt/products/oppo/A71/oppo-a715-1.jpg",
                price: 1000000
            },
            {
                id: 7,
                name: "Oppo A714",
                imageSrc: "https://cdn.tgdd.vn/Products/Images/42/113259/oppo-a714-1.jpg",
                price: 1000000
            },
            {
                id: 8,
                name: "Oppo R7S",
                imageSrc: "https://www.naijatechguide.com/wp-content/uploads/2015/10/oppo-r7s.png",
                price: 1000000
            },
            {
                id: 9,
                name: "Oppo A715",
                imageSrc: "http://cdn.phuongtung.info/pt/products/oppo/A71/oppo-a715-1.jpg",
                price: 1000000
            },
            {
                id: 10,
                name: "Oppo A714",
                imageSrc: "https://cdn.tgdd.vn/Products/Images/42/113259/oppo-a714-1.jpg",
                price: 1000000
            },
            {
                id: 11,
                name: "Oppo R7S",
                imageSrc: "https://www.naijatechguide.com/wp-content/uploads/2015/10/oppo-r7s.png",
                price: 1000000
            },
            {
                id: 12,
                name: "Oppo A715",
                imageSrc: "http://cdn.phuongtung.info/pt/products/oppo/A71/oppo-a715-1.jpg",
                price: 1000000
            },
            {
                id: 13,
                name: "Oppo A714",
                imageSrc: "https://cdn.tgdd.vn/Products/Images/42/113259/oppo-a714-1.jpg",
                price: 1000000
            },
            {
                id: 14,
                name: "Oppo R7S",
                imageSrc: "https://www.naijatechguide.com/wp-content/uploads/2015/10/oppo-r7s.png",
                price: 1000000
            },
            {
                id: 15,
                name: "Oppo A715",
                imageSrc: "http://cdn.phuongtung.info/pt/products/oppo/A71/oppo-a715-1.jpg",
                price: 1000000
            }
        ];

        window.onload = displayItems;

        function displayItems() {
            var imageCoverDiv = document.createElement("div");
            imageCoverDiv.setAttribute("class", "item");


            items.forEach(item => {
                var image = document.createElement("img");
                image.setAttribute("src", item.imageSrc);
                image.setAttribute("class", "img-thumbnail product-image")
                image.setAttribute("id", item.id);
                image.setAttribute("alt", item.name);

                image.addEventListener("click", function () {
                    alert("Sản phẩm đã được thêm vào");
                    onConfirm(item);
                });

                var itemName = document.createElement("span");
                var itemNameText = document.createTextNode(item.name);
                itemName.appendChild(itemNameText);

                var divImage = document.createElement("div");
                divImage.setAttribute("class", "div-image");

                divImage.appendChild(image);
                divImage.appendChild(itemName);

                imageCoverDiv.appendChild(divImage);
            });

            document.getElementById("product-image-container").appendChild(imageCoverDiv);

        }

        function onConfirm(item) {
            selectedItem.push(item);
            var x = selectedItem.length;

            var body = document.getElementById("tab");

            // creating all cells
            for (var i = 0; i < 1; i++) {
                // creates a table row
                var row = document.createElement("tr");
                row.setAttribute("valign", "middle");
                row.setAttribute("align", "center");

                // select đầu dòng
                var cell0 = document.createElement("td");
                cell0.setAttribute("class", "v-align");

                var checkbox = document.createElement("input");
                checkbox.setAttribute('type', 'checkbox');

                cell0.appendChild(checkbox);

                // image
                var cell1 = document.createElement("td");
                cell1.setAttribute("class", "v-align");

                var image = document.createElement("img");
                image.setAttribute("src", item.imageSrc);
                image.setAttribute("class", "img-thumbnail product-image")
                image.setAttribute("id", item.id);
                image.setAttribute("alt", item.name);
                image.setAttribute('style', "width: 100px; height: 100px");

                cell1.appendChild(image);

                // name
                var cell2 = document.createElement("td");
                cell2.setAttribute("class", "v-align");
                var cell2Text = document.createTextNode(item.name);
                cell2.appendChild(cell2Text);

                // gia goc
                var cell3 = document.createElement("td");
                cell3.setAttribute("class", "v-align");

                var inputPriceBefore = document.createElement("input");
                inputPriceBefore.setAttribute('type', 'text');
                inputPriceBefore.setAttribute('value', item.price);
                inputPriceBefore.setAttribute('class', "form-control");;
                inputPriceBefore.setAttribute('style', "width: 115px;");

                var lablePriceBefore = document.createElement("span")
                var lablePriceBeforeText = document.createTextNode(" VNĐ");
                lablePriceBefore.appendChild(lablePriceBeforeText);

                cell3.appendChild(inputPriceBefore);
                cell3.appendChild(lablePriceBefore);

                // phan tram giam
                var cell4 = document.createElement("td");
                cell4.setAttribute("class", "v-align");

                var inputPercent = document.createElement("input");
                inputPercent.setAttribute('type', 'text');
                inputPercent.setAttribute('value', 10);
                inputPercent.setAttribute('class', "form-control");;
                inputPercent.setAttribute('style', "width: 115px;");

                var inputPercentSpan = document.createElement("span")
                var inputPercentSpanText = document.createTextNode(" % Giảm");
                inputPercentSpan.appendChild(inputPercentSpanText);

                cell4.appendChild(inputPercent);
                cell4.appendChild(inputPercentSpan);

                // gia sau giam
                var cell5 = document.createElement("td");
                cell5.setAttribute("class", "v-align");

                var priceAfter = item.price - (item.price * (inputPercent.value / 100));

                var inputPriceAfter = document.createElement("input");
                inputPriceAfter.setAttribute('type', 'text');
                inputPriceAfter.setAttribute('value', priceAfter);
                inputPriceAfter.setAttribute('class', "form-control");
                inputPriceAfter.setAttribute('style', "width: 115px;");

                var lablePriceAfter = document.createElement("span")
                var lablePriceAfterText = document.createTextNode(" VNĐ");
                lablePriceAfter.appendChild(lablePriceAfterText);

                cell5.appendChild(inputPriceAfter);
                cell5.appendChild(lablePriceAfter);

                // action
                var cell6 = document.createElement("td");
                cell6.setAttribute("class", "v-align");

                var btn = document.createElement("button");
                btn.setAttribute("class", "btn btn-sm btn-danger");

                var icon = document.createElement("i");
                icon.className = "fa fa-trash";
                btn.appendChild(icon);

                cell6.appendChild(btn);

                // generate row
                row.appendChild(cell0);
                row.appendChild(cell1);
                row.appendChild(cell2);
                row.appendChild(cell3);
                row.appendChild(cell4);
                row.appendChild(cell5);
                row.appendChild(cell6);

                // add the row to the end of the table body
                body.appendChild(row);

                btn.addEventListener("click", function () {
                    row.parentNode.removeChild(row);
                });
            }
            body.appendChild(tblBody);
        }

        function onFinish() {
            console.log(selectedItem);
        }

        $(function () {
            $('input[name="datetimes"]').daterangepicker({
                timePicker: true,
                startDate: moment().startOf('hour'),
                endDate: moment().startOf('hour').add(32, 'hour'),
                locale: {
                    format: 'M/DD hh:mm A'
                }
            });
        });
    </script>

</body>

</html>